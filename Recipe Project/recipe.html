<!doctype html>
<html>
    <head>
         <meta charset="utf-8">
         <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>Spoonful - Recipes</title>

         <!-- Google Fonts -->
         <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500&family=Lato:wght@400;500&display=swap" rel="stylesheet">

         <!-- Bootstrap CSS -->
         <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
         <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    </head>

    <!-- Slogan lol -->
        <div class="mt-0" rounded text-center" style="background-color:#dbeef4"> 
                <h6 class="text-center" style="font-family:'Quicksand'; color:#688c96;"> 
                    a taste of love, in every recipe  
                </h6>
            </div>

            <!-- NavBar -->
                <nav class="navbar navbar-expand-lg bg-body-tertiary; style="background-color: #ffffff; padding: 10px 20px;">
                    <div class="container-fluid">
                        <a class="navbar-brand" href="https://jenniferguinanzaca.github.io/final/index.html" style="font-family:'Quicksand'; color:#688c96; font-size:34px;"> Spoonful</a>

                <!--Collapse 4 mobile-->
                        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent" aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                        </button>

                        <div class="collapse navbar-collapse justify-content-end" id="navbarContent">
                            <ul class="navbar-nav mb-2 mb-lg-0">
                                <li class="nav-item">
                                    <a class="nav-link active" aria-current="page" href="https://jenniferguinanzaca.github.io/final/index.html" style="color:#688c96;">Home</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#AboutUs" style="color:#688c96;">About Us</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="https://jenniferguinanzaca.github.io/final/recipes.html" style="color:#688c96;" >Recipes</a>
                                </li>
                            </ul>
                           <form class="d-flex ms-3" role="search">
                            <input id="searchInput" class="form-control rounded-pill border border-secondary me-2 px-3" 
                            type="search" 
                            placeholder="Search recipes..." 
                            aria-label="Search" style="width: 200px; transition: all 0.3s;">
                            <button type= "button" class="btn btn-outline-success rounded-pill px-4" 
                            type="submit" onclick="searchRecipe()">Search</button>
                        </form>
                    </div>
                </div>
            </nav>

            <hr style="border: none; height: 1px; background-color: #d5d2d1; margin: 0 0 20px 0;"> 

            <div class="container py-5" id="recipeContainer">
                <!-- Recipe content will appear here -->
            </div>
    </body> 
    <script>
        const apiKey = "fa5eca3f2d24416287a3dc418835e215";
        const container = document.getElementById("recipeContainer");
        const params = new URLSearchParams(window.location.search);
        const id = params.get("id");

        if (id){
            loadRecipe(id);
        }

        async function loadRecipe(id){ 
            try{
               const url = `https://api.spoonacular.com/recipes/${id}/information?apiKey=${apiKey}&includeNutrition=true`;
               const response = await fetch (url);
               const data = await response.json();
               displayRecipe(data);
            } catch (error){
                container.innerHTML = "<p> Could not load recipe. Try again later. </p>";
                console.error("Error loading recipe:",error);
            }
        }

        function displayRecipe(data){
            let ingredientsHTML = "";
            for (let i = 0; i < data.extendedIngredients.length; i++){
                ingredientsHTML += `<li>${data.extendedIngredients[i].original}</li>`;
            }

            let instructionsHTML = "";
            if (data.analyzedInstructions.length >0) {
                const steps = data.analyzedInstructions[0].steps;
                for(let i=0; i < steps.length; i++){
                    instructionsHTML += `<li>${steps[i].step}</li>`;
                }
            } else {
                instructionsHTML = "<li>No instructions provided.</li>";
            }

            container.innerHTML = `
            <h1 class="mb-4" style="font-family:'Quicksand'; color:#688c96;"> ${data.title}</h1>
            <img src="${data.image}" class="img-fluid mb-4 rounded">

            <h3 class="mt-4" style="color:#688c96;">Info</h3>
            <p style="color:#555;"><strong>Ready in:</strong> ${data.readyInMinutes} minutes</p>
            <p style="color:#555;"><strong>Servings:</strong> ${data.servings}</p>

            <h3 style="color:#688c96;">Ingredients</h3>
            <ul style="color:#555;">${ingredientsHTML}</ul>

            <h3 class="mt-4" style="color:#688c96;">Instructions</h3>
            <ol style="color:#555;">${instructionsHTML}</ol>
            `;
        }

         function searchRecipe(){
            const query = document.getElementById("searchInput").value.trim();
            if (query){
                window.location.href = `recipes.html?query=${encodeURIComponent(query)}`;
            }
        }

    </script>
</html>